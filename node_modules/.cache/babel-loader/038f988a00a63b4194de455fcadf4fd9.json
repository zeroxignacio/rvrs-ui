{"ast":null,"code":"import _regeneratorRuntime from\"/Users/ignacio/Documents/GitHub/reverse-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/ignacio/Documents/GitHub/reverse-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/ignacio/Documents/GitHub/reverse-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _objectSpread from\"/Users/ignacio/Documents/GitHub/reverse-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _taggedTemplateLiteral from\"/Users/ignacio/Documents/GitHub/reverse-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";var _templateObject;import React,{useState}from'react';import{Link,Route,useRouteMatch}from'react-router-dom';import BigNumber from'bignumber.js';import{useWallet}from'@binance-chain/bsc-use-wallet';import{BLOCKS_PER_YEAR}from'config';import orderBy from'lodash/orderBy';import partition from'lodash/partition';import useI18n from'hooks/useI18n';import useBlock from'hooks/useBlock';import{useFarms,usePools2,usePrices,getTotalValueFromQuoteTokens,lookupPrice}from'state/hooks';import{QuoteToken}from'config/constants/types';import FlexLayout from'components/layout/Flex';import Page from'components/layout/Page';import styled from'styled-components';import BondsDashboard from'views/BondsDashboard';import PoolCard from'./components/PoolCard';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var BtnMenu=styled.button(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n  -webkit-box-align: center;\\n  align-items: center;\\n  background-color: rgba(0, 0, 0,0) !important;\\n  border: 1px;\\n  border-style: solid !important;\\n  border-color: #ffff !important;\\n  border-radius: 10px;\\n  color: #ffff;\\n  font-size: 15px;\\n  font-weight: 400;\\n  width: 100%;\\n  display: inline-flex;\\n  min-height: 18px;\\n  max-height: 30px;\\n  max-width: 80px;\\n  \\n  padding: 12px;\\n\\n  box-shadow: 0px 0px 2px #fff;\\n  \"])));var Farm=function Farm(){var _useRouteMatch=useRouteMatch(),path=_useRouteMatch.path;var _useWallet=useWallet(),account=_useWallet.account;var farms=useFarms();var pools2=usePools2(account);var prices=usePrices();var block=useBlock();var poolsWithApy=pools2.map(function(pool2){var quoteTokens=new BigNumber(pool2.quoteTokenPerLp).times(pool2.totalStaked).div(new BigNumber(10).pow(18));if(pool2.isSingleAsset){// Handle single staking pools\nquoteTokens=new BigNumber(pool2.totalStaked).div(new BigNumber(10).pow(18)).div(2);}var tvl=getTotalValueFromQuoteTokens(quoteTokens,pool2.quoteTokenSymbol,prices);// console.log(pool2.sousId, quoteTokens && quoteTokens.toNumber(), tvl && tvl.toNumber())\n// console.log(\"APY\", pool2, tvl && tvl.toNumber())\nvar rewardTokenPrice=lookupPrice(QuoteToken.RVRS,prices);// console.log(\"price\", pool2.tokenName, rewardTokenPrice && rewardTokenPrice.toNumber())\nvar totalRewardPricePerYear=rewardTokenPrice.times(pool2.tokenPerBlock).times(BLOCKS_PER_YEAR);// const totalStakingTokenInPool = stakingTokenPriceInBNB.times(getBalanceNumber(pool2.totalStaked))\nvar apy=totalRewardPricePerYear.div(tvl).times(100);// console.log(\"TVL\", pool2.stakingTokenName, tvl && tvl.toNumber(), apy && apy.toNumber())\nreturn _objectSpread(_objectSpread({},pool2),{},{isFinished:pool2.sousId===0?false:pool2.isFinished&&block>pool2.endBlock,apy:apy,tvl:tvl});});var _partition=partition(poolsWithApy,function(pool2){return pool2.isFinished;}),_partition2=_slicedToArray(_partition,2),finishedPools=_partition2[0],openPools=_partition2[1];var _useRouteMatch2=useRouteMatch(),url=_useRouteMatch2.url,isExact=_useRouteMatch2.isExact;var _useState=useState(true),_useState2=_slicedToArray(_useState,2),modalOpen=_useState2[0],setModalOpen=_useState2[1];var handleModal=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setModalOpen(!modalOpen);case 1:case\"end\":return _context.stop();}}},_callee);}));return function handleModal(){return _ref.apply(this,arguments);};}();var TranslateString=useI18n();return/*#__PURE__*/_jsxs(Page,{children:[/*#__PURE__*/_jsx(BondsDashboard,{}),/*#__PURE__*/_jsxs(FlexLayout,{children:[/*#__PURE__*/_jsx(Route,{exact:true,path:\"\".concat(path),children:/*#__PURE__*/_jsx(_Fragment,{children:orderBy(openPools,['sortOrder']).map(function(pool2){return/*#__PURE__*/_jsx(PoolCard,{pool2:pool2},pool2.sousId);})})}),/*#__PURE__*/_jsx(Route,{path:\"\".concat(path,\"/history\"),children:orderBy(finishedPools,['sortOrder']).map(function(pool2){return/*#__PURE__*/_jsx(PoolCard,{pool2:pool2},pool2.sousId);})}),/*#__PURE__*/_jsx(BtnMenu,{as:Link,to:\"\".concat(url),style:{marginRight:'6px',marginTop:'0px',marginLeft:'0px',justifyContent:'center'},children:TranslateString(698,'Active')}),/*#__PURE__*/_jsx(BtnMenu,{as:Link,to:\"\".concat(url,\"/history\"),style:{marginRight:'6px',marginTop:'0px',marginLeft:'0px',justifyContent:'center'},children:TranslateString(7200,'Inactive')})]})]});};export default Farm;","map":{"version":3,"sources":["/Users/ignacio/Documents/GitHub/reverse-frontend/src/views/Pools2/Syrup.tsx"],"names":["React","useState","Link","Route","useRouteMatch","BigNumber","useWallet","BLOCKS_PER_YEAR","orderBy","partition","useI18n","useBlock","useFarms","usePools2","usePrices","getTotalValueFromQuoteTokens","lookupPrice","QuoteToken","FlexLayout","Page","styled","BondsDashboard","PoolCard","BtnMenu","button","Farm","path","account","farms","pools2","prices","block","poolsWithApy","map","pool2","quoteTokens","quoteTokenPerLp","times","totalStaked","div","pow","isSingleAsset","tvl","quoteTokenSymbol","rewardTokenPrice","RVRS","totalRewardPricePerYear","tokenPerBlock","apy","isFinished","sousId","endBlock","finishedPools","openPools","url","isExact","modalOpen","setModalOpen","handleModal","TranslateString","marginRight","marginTop","marginLeft","justifyContent"],"mappings":"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","sourcesContent":["import React, { useState } from 'react'\nimport { Link, Route, useRouteMatch } from 'react-router-dom'\nimport BigNumber from 'bignumber.js'\nimport { useWallet } from '@binance-chain/bsc-use-wallet'\nimport { BLOCKS_PER_YEAR } from 'config'\nimport orderBy from 'lodash/orderBy'\nimport partition from 'lodash/partition'\nimport useI18n from 'hooks/useI18n'\nimport { ButtonMenu, ButtonMenuItem } from '@pancakeswap-libs/uikit'\nimport useBlock from 'hooks/useBlock'\nimport { getBalanceNumber } from 'utils/formatBalance'\nimport {\n  useFarms,\n  usePriceBnbBusd,\n  usePools2,\n  usePrices,\n  getTotalValueFromQuoteTokens,\n  lookupPrice,\n} from 'state/hooks'\nimport { QuoteToken, Pool2Category } from 'config/constants/types'\nimport FlexLayout from 'components/layout/Flex'\nimport Page from 'components/layout/Page'\nimport styled from 'styled-components'\n\nimport BondsDashboard from 'views/BondsDashboard'\nimport PoolCard from './components/PoolCard'\nimport PoolTabButtons from './components/PoolTabButtons'\nimport Hero2 from './components/Hero'\n\nconst BtnMenu = styled.button`\n  -webkit-box-align: center;\n  align-items: center;\n  background-color: rgba(0, 0, 0,0) !important;\n  border: 1px;\n  border-style: solid !important;\n  border-color: #ffff !important;\n  border-radius: 10px;\n  color: #ffff;\n  font-size: 15px;\n  font-weight: 400;\n  width: 100%;\n  display: inline-flex;\n  min-height: 18px;\n  max-height: 30px;\n  max-width: 80px;\n  \n  padding: 12px;\n\n  box-shadow: 0px 0px 2px #fff;\n  `\n\nconst Farm: React.FC = () => {\n  const { path } = useRouteMatch()\n  const { account } = useWallet()\n  const farms = useFarms()\n  const pools2 = usePools2(account)\n  const prices = usePrices()\n  const block = useBlock()\n\n  const poolsWithApy = pools2.map((pool2) => {\n\n    let quoteTokens = new BigNumber(pool2.quoteTokenPerLp).times(pool2.totalStaked).div(new BigNumber(10).pow(18))\n    if (pool2.isSingleAsset) {\n        // Handle single staking pools\n        quoteTokens = new BigNumber(pool2.totalStaked).div(new BigNumber(10).pow(18)).div(2)\n    }\n\n    const tvl = getTotalValueFromQuoteTokens(quoteTokens, pool2.quoteTokenSymbol, prices)\n    // console.log(pool2.sousId, quoteTokens && quoteTokens.toNumber(), tvl && tvl.toNumber())\n\n    // console.log(\"APY\", pool2, tvl && tvl.toNumber())\n    const rewardTokenPrice = lookupPrice(QuoteToken.RVRS, prices)\n    // console.log(\"price\", pool2.tokenName, rewardTokenPrice && rewardTokenPrice.toNumber())\n\n    const totalRewardPricePerYear = rewardTokenPrice.times(pool2.tokenPerBlock).times(BLOCKS_PER_YEAR)\n    // const totalStakingTokenInPool = stakingTokenPriceInBNB.times(getBalanceNumber(pool2.totalStaked))\n    const apy = totalRewardPricePerYear.div(tvl).times(100)\n    // console.log(\"TVL\", pool2.stakingTokenName, tvl && tvl.toNumber(), apy && apy.toNumber())\n\n    return {\n      ...pool2,\n      isFinished: pool2.sousId === 0 ? false : pool2.isFinished && block > pool2.endBlock,\n      apy,\n      tvl\n    }\n  })\n\n  const [finishedPools, openPools] = partition(poolsWithApy, (pool2) => pool2.isFinished)\n  const { url, isExact } = useRouteMatch()\n  const [modalOpen, setModalOpen] = useState(true) \n  const handleModal = async () => {\n    setModalOpen(!modalOpen)\n  }  \n\n  \n\n  const TranslateString = useI18n()\n\n  return (\n    <Page>\n      <BondsDashboard/>\n\n      <FlexLayout>\n        <Route exact path={`${path}`}>\n          <>\n            {orderBy(openPools, ['sortOrder']).map((pool2) => (\n              <PoolCard key={pool2.sousId} pool2={pool2} />\n            ))}\n          </>\n        </Route>\n        <Route path={`${path}/history`}>\n          {orderBy(finishedPools, ['sortOrder']).map((pool2) => (\n            <PoolCard key={pool2.sousId} pool2={pool2} />\n          ))}\n        </Route>\n        \n      \n      <BtnMenu as={Link} to={`${url}`}             \n        style={{\n            marginRight: '6px',\n            marginTop: '0px',\n            marginLeft: '0px',\n            justifyContent: 'center'\n          }}>\n          {TranslateString(698, 'Active')}\n        </BtnMenu>\n        <BtnMenu as={Link} to={`${url}/history`}       style={{\n            marginRight: '6px',\n            marginTop: '0px',\n            marginLeft: '0px',\n            justifyContent: 'center'\n          }}>\n          {TranslateString(7200, 'Inactive')}\n        </BtnMenu>\n\n        </FlexLayout> \n\n\n\n\n    </Page>\n  )\n}\n\nexport default Farm\n\n\n"]},"metadata":{},"sourceType":"module"}