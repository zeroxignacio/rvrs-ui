{"ast":null,"code":"var _jsxFileName = \"/Users/ignacio/Documents/GitHub/reverse-frontend/src/pages/Bonds/card.tsx\",\n    _s = $RefreshSig$();\n\nimport BigNumber from 'bignumber.js';\nimport React, { useCallback, useState } from 'react';\nimport { useSousApproveBurn } from 'hooks/useApprove';\nimport { useSousStakeBurn } from 'hooks/useStake';\nimport { useSousHarvestBurn } from 'hooks/useHarvest';\nimport { Flex, useModal } from '@pancakeswap-libs/uikit';\nimport { useWallet } from '@binance-chain/bsc-use-wallet';\nimport { useERC20 } from 'hooks/useContract';\nimport useBlock from 'hooks/useBlock';\nimport { getBalanceNumber } from 'utils/formatBalance';\nimport { Skeleton } from 'components/Skeleton';\nimport BondsContainer from '../../components/layout/containers/bondsContainer';\nimport ContentCard from '../../components/layout/cards/bonds/contentCard';\nimport HeaderCard from '../../components/layout/cards/bonds/headerCard';\nimport DepositModal from '../../components/bondModal';\nimport ClaimButtonDisabled from '../../components/layout/buttons/claimButtonDisabled';\nimport BondButton from '../../components/layout/buttons/bondButton';\nimport BondButtonDisabled from '../../components/layout/buttons/bondButtonDisabled';\nimport ClaimButton from '../../components/layout/buttons/claimButton';\nimport Typography from '../../components/layout/typography/typography';\nimport TypographyBold from '../../components/layout/typography/typographyBold';\nimport TypographyTitle from '../../components/layout/typography/typographyTitle';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Bonds = ({\n  pool2\n}) => {\n  _s();\n\n  const {\n    sousId,\n    tokenName,\n    stakingTokenName,\n    stakingTokenAddress,\n    apy,\n    tokenDecimals,\n    startBlock,\n    endBlock,\n    userData,\n    stakingLimit\n  } = pool2;\n  const block = useBlock();\n  const user = useWallet();\n  const tokenAddress = useERC20(stakingTokenAddress);\n  const allowance = new BigNumber((userData === null || userData === void 0 ? void 0 : userData.allowance) || 0);\n  const earnings = new BigNumber((userData === null || userData === void 0 ? void 0 : userData.pendingReward) || 0);\n  const earningsNo = earnings.toNumber();\n  const convertedLimit = new BigNumber(stakingLimit).multipliedBy(new BigNumber(10).pow(tokenDecimals)); // functions\n\n  const {\n    onApprove\n  } = useSousApproveBurn(tokenAddress, sousId);\n  const {\n    onStake\n  } = useSousStakeBurn(sousId);\n  const {\n    onReward\n  } = useSousHarvestBurn(sousId);\n  const [requestedApproval, setRequestedApproval] = useState(false);\n  const [pendingTx, setPendingTx] = useState(false); // bond token balance\n\n  const bondTokenBalance = new BigNumber((userData === null || userData === void 0 ? void 0 : userData.stakingTokenBalance) || 0);\n  const bondTokenBalanceNo = bondTokenBalance.toNumber();\n  const bondTokenBalanceStr = bondTokenBalanceNo.toLocaleString('en-us', {\n    maximumFractionDigits: 2,\n    minimumFractionDigits: 0\n  }); // bonded balance\n\n  const bondedBalance = new BigNumber((userData === null || userData === void 0 ? void 0 : userData.stakedBalance) || 0);\n  const bondedBalanceNo = bondedBalance.toNumber();\n  const bondedBalanceStr = getBalanceNumber(bondedBalance).toLocaleString('en-us', {\n    maximumFractionDigits: 2,\n    minimumFractionDigits: 2\n  }); // misc\n\n  const userHasBondedBalance = (bondedBalance === null || bondedBalance === void 0 ? void 0 : bondedBalance.toNumber()) > 0;\n  const needsApproval = !userHasBondedBalance && !allowance.toNumber(); // to start \n\n  const hasStarted = block > startBlock;\n  const hoursToStartNo = (startBlock - block) * 2 * 0.000277778;\n  const hoursToStartStr = hoursToStartNo.toLocaleString('en-us', {\n    maximumFractionDigits: 2,\n    minimumFractionDigits: 0\n  }); // vesting period\n\n  const hasEnded = block > endBlock;\n  const vesting = block > startBlock ? (endBlock - block) * 2 * 0.000277778 * 0.0416667 : (endBlock - startBlock) * 2 * 0.000277778 * 0.0416667;\n  const vestingStr = vesting.toLocaleString('en-us', {\n    maximumFractionDigits: 1\n  }); // returns\n\n  const roiNo = (apy && apy.div(365).times(vesting).minus(100)).toNumber();\n  const positiveRoi = roiNo > 0;\n  const fivePercentRoi = roiNo > 5;\n  const roiStr = roiNo.toLocaleString('en-us', {\n    maximumFractionDigits: 0,\n    minimumFractionDigits: 0\n  }); // tvl\n\n  const tbvNo = pool2.tvl && pool2.tvl.toNumber();\n  const tbvStr = tbvNo.toLocaleString('en-us', {\n    maximumFractionDigits: 0,\n    minimumFractionDigits: 0\n  }); // rewards to claim\n\n  const rewardsNo = getBalanceNumber(earnings, tokenDecimals);\n  const rewardsStr = rewardsNo.toLocaleString('en-us', {\n    maximumFractionDigits: 2,\n    minimumFractionDigits: 0\n  }); // bond modal\n\n  const [onPresentDeposit] = useModal( /*#__PURE__*/_jsxDEV(DepositModal, {\n    max: stakingLimit && bondTokenBalance.isGreaterThan(convertedLimit) ? convertedLimit : bondTokenBalance,\n    onConfirm: onStake,\n    tokenName: stakingLimit ? `${stakingTokenName} (${stakingLimit} max)` : stakingTokenName\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 102,\n    columnNumber: 5\n  }, this)); // approve tx\n\n  const handleApprove = useCallback(async () => {\n    try {\n      setRequestedApproval(true);\n      const txHash = await onApprove();\n\n      if (!txHash) {\n        setRequestedApproval(false);\n      }\n    } catch (e) {\n      console.error(e);\n    }\n  }, [onApprove, setRequestedApproval]);\n  return /*#__PURE__*/_jsxDEV(BondsContainer, {\n    children: [/*#__PURE__*/_jsxDEV(HeaderCard, {\n      children: hasStarted ? /*#__PURE__*/_jsxDEV(Flex, {\n        justifyContent: \"space-between\",\n        children: [/*#__PURE__*/_jsxDEV(Flex, {\n          justifyContent: \"space-between\",\n          children: /*#__PURE__*/_jsxDEV(TypographyTitle, {\n            children: /*#__PURE__*/_jsxDEV(Flex, {\n              justifyContent: \"space-between\",\n              children: [/*#__PURE__*/_jsxDEV(TypographyTitle, {\n                style: {\n                  marginLeft: \"17px\"\n                },\n                children: [tokenName, \"\\xA0\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 127,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n                target: \"_blanK\",\n                rel: \"noreferrer\",\n                href: \"https://reverse.gitbook.io/docs/the-protocol/reverseum-bonding-pools\",\n                className: \"nav-links\",\n                children: /*#__PURE__*/_jsxDEV(TypographyTitle, {\n                  style: {\n                    borderBottom: '1px dotted #FFFF'\n                  },\n                  children: \"rvBond\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 129,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 128,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 126,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 125,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 13\n        }, this), fivePercentRoi ? /*#__PURE__*/_jsxDEV(Flex, {\n          alignItems: \"end\",\n          children: user && (needsApproval ? /*#__PURE__*/_jsxDEV(BondButton, {\n            style: {\n              justifyContent: \"center\"\n            },\n            disabled: hasEnded,\n            onClick: handleApprove,\n            children: \"Enable\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 137,\n            columnNumber: 19\n          }, this) : /*#__PURE__*/_jsxDEV(BondButton, {\n            style: {\n              justifyContent: \"center\"\n            },\n            disabled: hasEnded,\n            onClick: onPresentDeposit,\n            children: \"Bond\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 144,\n            columnNumber: 19\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 135,\n          columnNumber: 15\n        }, this) : /*#__PURE__*/_jsxDEV(Flex, {\n          alignItems: \"end\",\n          children: user && /*#__PURE__*/_jsxDEV(BondButtonDisabled, {\n            disabled: true,\n            children: \"Sold Out\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 154,\n            columnNumber: 19\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 152,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(Flex, {\n        justifyContent: \"space-between\",\n        children: [/*#__PURE__*/_jsxDEV(TypographyTitle, {\n          children: /*#__PURE__*/_jsxDEV(Flex, {\n            justifyContent: \"space-between\",\n            children: [/*#__PURE__*/_jsxDEV(TypographyTitle, {\n              style: {\n                marginLeft: \"17px\"\n              },\n              children: [tokenName, \"\\xA0\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 163,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n              target: \"_blanK\",\n              rel: \"noreferrer\",\n              href: \"https://reverse.gitbook.io/docs/the-protocol/reverseum-bonding-pools\",\n              className: \"nav-links\",\n              children: /*#__PURE__*/_jsxDEV(TypographyTitle, {\n                style: {\n                  borderBottom: '1px dotted #FFFF'\n                },\n                children: \"rvBond\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 165,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 164,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 162,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 161,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Flex, {\n          alignItems: \"end\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            children: hoursToStartNo > 1000 ? /*#__PURE__*/_jsxDEV(BondButtonDisabled, {\n              disabled: true,\n              style: {\n                justifyContent: \"center\"\n              },\n              children: /*#__PURE__*/_jsxDEV(Skeleton, {\n                height: 10\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 173,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 172,\n              columnNumber: 19\n            }, this) : /*#__PURE__*/_jsxDEV(BondButtonDisabled, {\n              disabled: true,\n              style: {\n                justifyContent: \"center\"\n              },\n              children: [hoursToStartStr, \"h Left\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 176,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 170,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 169,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Flex, {\n      justifyContent: \"space-between\",\n      children: [/*#__PURE__*/_jsxDEV(ContentCard, {\n        children: /*#__PURE__*/_jsxDEV(Flex, {\n          justifyContent: \"space-between\",\n          children: [/*#__PURE__*/_jsxDEV(Flex, {\n            flexDirection: \"column\",\n            alignItems: \"start\",\n            children: [/*#__PURE__*/_jsxDEV(TypographyBold, {\n              style: {\n                marginBottom: \"5px\"\n              },\n              children: \"vROI\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 190,\n              columnNumber: 15\n            }, this), hasStarted ? /*#__PURE__*/_jsxDEV(\"div\", {\n              children: positiveRoi ? /*#__PURE__*/_jsxDEV(Typography, {\n                children: [roiStr, \"%\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 194,\n                columnNumber: 21\n              }, this) : /*#__PURE__*/_jsxDEV(Typography, {\n                children: \"Sold\\xA0Out\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 196,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 192,\n              columnNumber: 17\n            }, this) : /*#__PURE__*/_jsxDEV(Skeleton, {\n              height: 10,\n              width: 60\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 200,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 189,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Flex, {\n            flexDirection: \"column\",\n            alignItems: \"start\",\n            children: [/*#__PURE__*/_jsxDEV(TypographyBold, {\n              style: {\n                marginBottom: \"5px\"\n              },\n              children: \"Vesting\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 205,\n              columnNumber: 15\n            }, this), !hasEnded ? /*#__PURE__*/_jsxDEV(\"div\", {\n              children: hasStarted ? /*#__PURE__*/_jsxDEV(Typography, {\n                children: [vestingStr, \"\\xA0Days\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 209,\n                columnNumber: 21\n              }, this) : /*#__PURE__*/_jsxDEV(Skeleton, {\n                height: 10,\n                width: 60\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 211,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 207,\n              columnNumber: 17\n            }, this) : /*#__PURE__*/_jsxDEV(Typography, {\n              children: \"Ended\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 214,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 204,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Flex, {\n            flexDirection: \"column\",\n            alignItems: \"start\",\n            children: [/*#__PURE__*/_jsxDEV(TypographyBold, {\n              style: {\n                marginBottom: \"5px\"\n              },\n              children: \"TVL\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 219,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: hasStarted ? /*#__PURE__*/_jsxDEV(Typography, {\n                children: [\"$\", tbvStr]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 222,\n                columnNumber: 19\n              }, this) : /*#__PURE__*/_jsxDEV(Skeleton, {\n                height: 10,\n                width: 60\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 224,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 220,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 218,\n            columnNumber: 13\n          }, this), user && /*#__PURE__*/_jsxDEV(Flex, {\n            flexDirection: \"column\",\n            alignItems: \"start\",\n            children: [/*#__PURE__*/_jsxDEV(TypographyBold, {\n              style: {\n                marginBottom: \"5px\"\n              },\n              children: \"Bonded\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 230,\n              columnNumber: 17\n            }, this), hasStarted ? /*#__PURE__*/_jsxDEV(\"div\", {\n              children: bondedBalanceNo ? /*#__PURE__*/_jsxDEV(Typography, {\n                children: [bondedBalanceStr, \"\\xA0\", tokenName]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 234,\n                columnNumber: 23\n              }, this) : /*#__PURE__*/_jsxDEV(Typography, {\n                children: \"N/A\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 236,\n                columnNumber: 23\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 232,\n              columnNumber: 19\n            }, this) : /*#__PURE__*/_jsxDEV(Typography, {\n              children: /*#__PURE__*/_jsxDEV(Skeleton, {\n                height: 10,\n                width: 64\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 240,\n                columnNumber: 31\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 240,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 229,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 187,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 186,\n        columnNumber: 9\n      }, this), user && /*#__PURE__*/_jsxDEV(Flex, {\n        children: rewardsNo > 0 ? /*#__PURE__*/_jsxDEV(ClaimButton, {\n          style: {\n            marginLeft: '20px',\n            justifyContent: \"center\"\n          },\n          disabled: !rewardsNo,\n          onClick: async () => {\n            setPendingTx(true);\n            await onReward();\n            setPendingTx(false);\n          },\n          children: /*#__PURE__*/_jsxDEV(Flex, {\n            flexDirection: \"column\",\n            alignItems: \"center\",\n            children: [/*#__PURE__*/_jsxDEV(TypographyBold, {\n              style: {\n                marginBottom: \"4px\"\n              },\n              children: \"Claim\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 259,\n              columnNumber: 19\n            }, this), hasStarted ? /*#__PURE__*/_jsxDEV(Typography, {\n              children: [rewardsStr, \"\\xA0RVRS\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 261,\n              columnNumber: 21\n            }, this) : /*#__PURE__*/_jsxDEV(Skeleton, {\n              height: 10,\n              width: 60\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 263,\n              columnNumber: 21\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 258,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 250,\n          columnNumber: 15\n        }, this) : /*#__PURE__*/_jsxDEV(ClaimButtonDisabled, {\n          style: {\n            marginLeft: '20px',\n            justifyContent: \"center\"\n          },\n          disabled: !rewardsNo,\n          onClick: async () => {\n            setPendingTx(true);\n            await onReward();\n            setPendingTx(false);\n          },\n          children: /*#__PURE__*/_jsxDEV(Flex, {\n            flexDirection: \"column\",\n            alignItems: \"center\",\n            children: [/*#__PURE__*/_jsxDEV(TypographyBold, {\n              style: {\n                marginBottom: \"4px\"\n              },\n              children: \"Claim\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 277,\n              columnNumber: 19\n            }, this), hasStarted ? /*#__PURE__*/_jsxDEV(Typography, {\n              children: [rewardsStr, \"\\xA0RVRS\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 279,\n              columnNumber: 21\n            }, this) : /*#__PURE__*/_jsxDEV(Skeleton, {\n              height: 10,\n              width: 60\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 281,\n              columnNumber: 21\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 276,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 268,\n          columnNumber: 15\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 248,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 185,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 120,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Bonds, \"hChKyZO1m7Lc3G99BAnMm5fWAfs=\", false, function () {\n  return [useBlock, useWallet, useERC20, useSousApproveBurn, useSousStakeBurn, useSousHarvestBurn, useModal];\n});\n\n_c = Bonds;\nexport default Bonds;\n\nvar _c;\n\n$RefreshReg$(_c, \"Bonds\");","map":{"version":3,"sources":["/Users/ignacio/Documents/GitHub/reverse-frontend/src/pages/Bonds/card.tsx"],"names":["BigNumber","React","useCallback","useState","useSousApproveBurn","useSousStakeBurn","useSousHarvestBurn","Flex","useModal","useWallet","useERC20","useBlock","getBalanceNumber","Skeleton","BondsContainer","ContentCard","HeaderCard","DepositModal","ClaimButtonDisabled","BondButton","BondButtonDisabled","ClaimButton","Typography","TypographyBold","TypographyTitle","Bonds","pool2","sousId","tokenName","stakingTokenName","stakingTokenAddress","apy","tokenDecimals","startBlock","endBlock","userData","stakingLimit","block","user","tokenAddress","allowance","earnings","pendingReward","earningsNo","toNumber","convertedLimit","multipliedBy","pow","onApprove","onStake","onReward","requestedApproval","setRequestedApproval","pendingTx","setPendingTx","bondTokenBalance","stakingTokenBalance","bondTokenBalanceNo","bondTokenBalanceStr","toLocaleString","maximumFractionDigits","minimumFractionDigits","bondedBalance","stakedBalance","bondedBalanceNo","bondedBalanceStr","userHasBondedBalance","needsApproval","hasStarted","hoursToStartNo","hoursToStartStr","hasEnded","vesting","vestingStr","roiNo","div","times","minus","positiveRoi","fivePercentRoi","roiStr","tbvNo","tvl","tbvStr","rewardsNo","rewardsStr","onPresentDeposit","isGreaterThan","handleApprove","txHash","e","console","error","marginLeft","borderBottom","justifyContent","marginBottom"],"mappings":"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","sourcesContent":["import BigNumber from 'bignumber.js'\nimport React, { useCallback, useState } from 'react'\nimport { useSousApproveBurn } from 'hooks/useApprove'\nimport { useSousStakeBurn } from 'hooks/useStake'\nimport { useSousHarvestBurn } from 'hooks/useHarvest'\nimport { Flex, useModal } from '@pancakeswap-libs/uikit'\nimport { useWallet } from '@binance-chain/bsc-use-wallet'\nimport { useERC20 } from 'hooks/useContract'\nimport useBlock from 'hooks/useBlock'\nimport { getBalanceNumber } from 'utils/formatBalance'\nimport { Pool2 } from 'state/types'\nimport { Skeleton } from 'components/Skeleton'\nimport BondsContainer from '../../components/layout/containers/bondsContainer'\nimport ContentCard from '../../components/layout/cards/bonds/contentCard'\nimport HeaderCard from '../../components/layout/cards/bonds/headerCard'\nimport DepositModal from '../../components/bondModal'\nimport ClaimButtonDisabled from '../../components/layout/buttons/claimButtonDisabled'\nimport BondButton from '../../components/layout/buttons/bondButton'\nimport BondButtonDisabled from '../../components/layout/buttons/bondButtonDisabled'\nimport ClaimButton from '../../components/layout/buttons/claimButton'\nimport Typography from '../../components/layout/typography/typography'\nimport TypographyBold from '../../components/layout/typography/typographyBold'\nimport TypographyTitle from '../../components/layout/typography/typographyTitle'\n\ninterface PoolWithApy extends Pool2 {\n  apy: BigNumber\n}\n\ninterface HarvestProps {\n  pool2: PoolWithApy\n}\n\nconst Bonds: React.FC<HarvestProps> = ({ pool2 }) => {\n  const {\n    sousId,\n    tokenName,\n    stakingTokenName,\n    stakingTokenAddress,\n    apy,\n    tokenDecimals,\n    startBlock,\n    endBlock,\n    userData,\n    stakingLimit,\n  } = pool2\n\n  const block = useBlock();\n  const user = useWallet();\n  const tokenAddress = useERC20(stakingTokenAddress);\n  const allowance = new BigNumber(userData?.allowance || 0);\n  const earnings = new BigNumber(userData?.pendingReward || 0);\n  const earningsNo = earnings.toNumber();\n  const convertedLimit = new BigNumber(stakingLimit).multipliedBy(new BigNumber(10).pow(tokenDecimals));\n\n  // functions\n  const { onApprove } = useSousApproveBurn(tokenAddress, sousId);\n  const { onStake } = useSousStakeBurn(sousId);\n  const { onReward } = useSousHarvestBurn(sousId);\n  const [requestedApproval, setRequestedApproval] = useState(false);\n  const [pendingTx, setPendingTx] = useState(false);\n\n  // bond token balance\n  const bondTokenBalance = new BigNumber(userData?.stakingTokenBalance || 0);\n  const bondTokenBalanceNo = bondTokenBalance.toNumber();\n  const bondTokenBalanceStr = bondTokenBalanceNo.toLocaleString('en-us', { maximumFractionDigits: 2, minimumFractionDigits: 0 });\n\n  // bonded balance\n  const bondedBalance = new BigNumber(userData?.stakedBalance || 0);\n  const bondedBalanceNo = bondedBalance.toNumber();\n  const bondedBalanceStr = getBalanceNumber(bondedBalance).toLocaleString('en-us', { maximumFractionDigits: 2, minimumFractionDigits: 2 });\n\n  // misc\n  const userHasBondedBalance = bondedBalance?.toNumber() > 0\n  const needsApproval = !userHasBondedBalance && !allowance.toNumber()\n\n  // to start \n  const hasStarted = block > startBlock\n  const hoursToStartNo = (startBlock - block) * 2 * 0.000277778;\n  const hoursToStartStr = hoursToStartNo.toLocaleString('en-us', { maximumFractionDigits: 2, minimumFractionDigits: 0 });\n\n  // vesting period\n  const hasEnded = block > endBlock\n  const vesting = block > startBlock ? (endBlock - block) * 2 * 0.000277778 * 0.0416667 : (endBlock - startBlock) * 2 * 0.000277778 * 0.0416667\n  const vestingStr = vesting.toLocaleString('en-us', { maximumFractionDigits: 1 })\n\n  // returns\n  const roiNo = (apy && apy.div(365).times(vesting).minus(100)).toNumber();\n  const positiveRoi = roiNo > 0;\n  const fivePercentRoi = roiNo > 5;\n  const roiStr = roiNo.toLocaleString('en-us', { maximumFractionDigits: 0, minimumFractionDigits: 0 });\n\n  // tvl\n  const tbvNo = pool2.tvl && pool2.tvl.toNumber();\n  const tbvStr = tbvNo.toLocaleString('en-us', { maximumFractionDigits: 0, minimumFractionDigits: 0 });\n\n  // rewards to claim\n  const rewardsNo = getBalanceNumber(earnings, tokenDecimals);\n  const rewardsStr = rewardsNo.toLocaleString('en-us', { maximumFractionDigits: 2, minimumFractionDigits: 0 });\n\n  // bond modal\n  const [onPresentDeposit] = useModal(\n    <DepositModal\n      max={stakingLimit && bondTokenBalance.isGreaterThan(convertedLimit) ? convertedLimit : bondTokenBalance}\n      onConfirm={onStake}\n      tokenName={stakingLimit ? `${stakingTokenName} (${stakingLimit} max)` : stakingTokenName}\n    />\n  )\n\n  // approve tx\n  const handleApprove = useCallback(async () => {\n    try {\n      setRequestedApproval(true)\n      const txHash = await onApprove()\n      if (!txHash) { setRequestedApproval(false) }\n    }\n    catch (e) { console.error(e) }\n  }, [onApprove, setRequestedApproval])\n\n  return (\n    <BondsContainer>\n      <HeaderCard>\n        {hasStarted ?\n          <Flex justifyContent=\"space-between\">\n            <Flex justifyContent=\"space-between\">\n              <TypographyTitle>\n                <Flex justifyContent=\"space-between\">\n                  <TypographyTitle style={{ marginLeft: \"17px\" }}>{tokenName}&nbsp;</TypographyTitle>\n                  <a target=\"_blanK\" rel=\"noreferrer\" href=\"https://reverse.gitbook.io/docs/the-protocol/reverseum-bonding-pools\" className=\"nav-links\">\n                    <TypographyTitle style={{ borderBottom: '1px dotted #FFFF' }}>rvBond</TypographyTitle>\n                  </a>\n                </Flex>\n              </TypographyTitle>\n            </Flex>\n            {fivePercentRoi ?\n              <Flex alignItems=\"end\">\n                {user && (needsApproval ? (\n                  <BondButton\n                    style={{ justifyContent: \"center\" }}\n                    disabled={hasEnded}\n                    onClick={handleApprove}>\n                    Enable\n                  </BondButton>\n                ) : (\n                  <BondButton style={{ justifyContent: \"center\" }}\n                    disabled={hasEnded}\n                    onClick={onPresentDeposit}>\n                    Bond\n                  </BondButton>\n                ))}\n              </Flex>\n              :\n              <Flex alignItems=\"end\">\n                {user &&\n                  <BondButtonDisabled disabled>Sold Out</BondButtonDisabled>\n                }\n              </Flex>\n            }\n          </Flex>\n          :\n          <Flex justifyContent=\"space-between\">\n            <TypographyTitle>\n              <Flex justifyContent=\"space-between\">\n                <TypographyTitle style={{ marginLeft: \"17px\" }}>{tokenName}&nbsp;</TypographyTitle>\n                <a target=\"_blanK\" rel=\"noreferrer\" href=\"https://reverse.gitbook.io/docs/the-protocol/reverseum-bonding-pools\" className=\"nav-links\">\n                  <TypographyTitle style={{ borderBottom: '1px dotted #FFFF' }}>rvBond</TypographyTitle>\n                </a>\n              </Flex>\n            </TypographyTitle>\n            <Flex alignItems=\"end\">\n              <div>\n                {hoursToStartNo > 1000 ?\n                  <BondButtonDisabled disabled style={{ justifyContent: \"center\" }}>\n                    <Skeleton height={10} />\n                  </BondButtonDisabled>\n                  :\n                  <BondButtonDisabled disabled style={{ justifyContent: \"center\" }}>\n                    {hoursToStartStr}h Left\n                  </BondButtonDisabled>\n                }\n              </div>\n            </Flex>\n          </Flex>\n        }\n      </HeaderCard>\n      <Flex justifyContent=\"space-between\">\n        <ContentCard>\n          <Flex justifyContent=\"space-between\">\n            {/* ROI */}\n            <Flex flexDirection=\"column\" alignItems=\"start\">\n              <TypographyBold style={{ marginBottom: \"5px\" }}>vROI</TypographyBold>\n              {hasStarted ?\n                <div>\n                  {positiveRoi ?\n                    <Typography>{roiStr}%</Typography>\n                    :\n                    <Typography>Sold&nbsp;Out</Typography>\n                  }\n                </div>\n                :\n                <Skeleton height={10} width={60} />\n              }\n            </Flex>\n            {/* Vesting */}\n            <Flex flexDirection=\"column\" alignItems=\"start\">\n              <TypographyBold style={{ marginBottom: \"5px\" }}>Vesting</TypographyBold>\n              {!hasEnded ?\n                <div>\n                  {hasStarted ?\n                    <Typography>{vestingStr}&nbsp;Days</Typography>\n                    :\n                    <Skeleton height={10} width={60} />}\n                </div>\n                :\n                <Typography>Ended</Typography>\n              }\n            </Flex>\n            {/* TVL */}\n            <Flex flexDirection=\"column\" alignItems=\"start\">\n              <TypographyBold style={{ marginBottom: \"5px\" }}>TVL</TypographyBold>\n              <div>\n                {hasStarted ?\n                  <Typography>${tbvStr}</Typography>\n                  :\n                  <Skeleton height={10} width={60} />}\n              </div>\n            </Flex>\n            {/* Bonded by user */}\n            {user && (\n              <Flex flexDirection=\"column\" alignItems=\"start\">\n                <TypographyBold style={{ marginBottom: \"5px\" }}>Bonded</TypographyBold>\n                {hasStarted ?\n                  <div>\n                    {bondedBalanceNo ?\n                      <Typography>{bondedBalanceStr}&nbsp;{tokenName}</Typography>\n                      :\n                      <Typography>N/A</Typography>\n                    }\n                  </div>\n                  :\n                  <Typography><Skeleton height={10} width={64} /></Typography>\n                }\n              </Flex>\n            )}\n          </Flex>\n        </ContentCard>\n        {/* Claim RVRS */}\n        {user && (\n          <Flex>\n            {rewardsNo > 0 ?\n              <ClaimButton\n                style={{ marginLeft: '20px', justifyContent: \"center\" }}\n                disabled={!rewardsNo}\n                onClick={async () => {\n                  setPendingTx(true)\n                  await onReward()\n                  setPendingTx(false)\n                }}>\n                <Flex flexDirection=\"column\" alignItems=\"center\">\n                  <TypographyBold style={{ marginBottom: \"4px\" }}>Claim</TypographyBold>\n                  {hasStarted ?\n                    <Typography>{rewardsStr}&nbsp;RVRS</Typography>\n                    :\n                    <Skeleton height={10} width={60} />\n                  }\n                </Flex>\n              </ClaimButton>\n              :\n              <ClaimButtonDisabled\n                style={{ marginLeft: '20px', justifyContent: \"center\" }}\n                disabled={!rewardsNo}\n                onClick={async () => {\n                  setPendingTx(true)\n                  await onReward()\n                  setPendingTx(false)\n                }}>\n                <Flex flexDirection=\"column\" alignItems=\"center\">\n                  <TypographyBold style={{ marginBottom: \"4px\" }}>Claim</TypographyBold>\n                  {hasStarted ?\n                    <Typography>{rewardsStr}&nbsp;RVRS</Typography>\n                    :\n                    <Skeleton height={10} width={60} />\n                  }\n                </Flex>\n              </ClaimButtonDisabled>\n            }\n          </Flex>\n        )}\n      </Flex>\n    </BondsContainer>\n  )\n}\n\nexport default Bonds\n\n\n"]},"metadata":{},"sourceType":"module"}