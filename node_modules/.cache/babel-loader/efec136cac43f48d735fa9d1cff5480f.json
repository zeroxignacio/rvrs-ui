{"ast":null,"code":"import _slicedToArray from\"/Users/ignacio/Documents/GitHub/reverse-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useEffect,useState}from'react';var useWithdrawalFeeTimer=function useWithdrawalFeeTimer(lastDepositedTime){var withdrawalFeePeriod=arguments.length>1&&arguments[1]!==undefined?arguments[1]:259200;var _useState=useState(null),_useState2=_slicedToArray(_useState,2),secondsRemaining=_useState2[0],setSecondsRemaining=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),hasUnstakingFee=_useState4[0],setHasUnstakingFee=_useState4[1];var _useState5=useState(Math.floor(Date.now()/1000)),_useState6=_slicedToArray(_useState5,2),currentSeconds=_useState6[0],setCurrentSeconds=_useState6[1];useEffect(function(){var feeEndTime=lastDepositedTime+withdrawalFeePeriod;var secondsRemainingCalc=feeEndTime-currentSeconds;var doesUnstakingFeeApply=secondsRemainingCalc>0;if(doesUnstakingFeeApply){setSecondsRemaining(secondsRemainingCalc);setHasUnstakingFee(true);}var tick=function tick(){setCurrentSeconds(function(prevSeconds){return prevSeconds+1;});};var timerInterval=setInterval(function(){return tick();},1000);return function(){return clearInterval(timerInterval);};},[lastDepositedTime,withdrawalFeePeriod,setSecondsRemaining,currentSeconds]);return{hasUnstakingFee:hasUnstakingFee,secondsRemaining:secondsRemaining};};export default useWithdrawalFeeTimer;","map":{"version":3,"sources":["/Users/ignacio/Documents/GitHub/reverse-frontend/src/views/Pools/components/useWithdrawFeeTimer.ts"],"names":["useEffect","useState","useWithdrawalFeeTimer","lastDepositedTime","withdrawalFeePeriod","secondsRemaining","setSecondsRemaining","hasUnstakingFee","setHasUnstakingFee","Math","floor","Date","now","currentSeconds","setCurrentSeconds","feeEndTime","secondsRemainingCalc","doesUnstakingFeeApply","tick","prevSeconds","timerInterval","setInterval","clearInterval"],"mappings":"uKAAA,OAASA,SAAT,CAAoBC,QAApB,KAAoC,OAApC,CAEA,GAAMC,CAAAA,qBAAqB,CAAG,QAAxBA,CAAAA,qBAAwB,CAACC,iBAAD,CAA6D,IAAjCC,CAAAA,mBAAiC,2DAAX,MAAW,CACvF,cAAgDH,QAAQ,CAAC,IAAD,CAAxD,wCAAOI,gBAAP,eAAyBC,mBAAzB,eACA,eAA8CL,QAAQ,CAAC,KAAD,CAAtD,yCAAOM,eAAP,eAAwBC,kBAAxB,eACA,eAA4CP,QAAQ,CAACQ,IAAI,CAACC,KAAL,CAAWC,IAAI,CAACC,GAAL,GAAa,IAAxB,CAAD,CAApD,yCAAOC,cAAP,eAAuBC,iBAAvB,eAEAd,SAAS,CAAC,UAAM,CACZ,GAAMe,CAAAA,UAAU,CAAGZ,iBAAiB,CAAGC,mBAAvC,CACA,GAAMY,CAAAA,oBAAoB,CAAGD,UAAU,CAAGF,cAA1C,CACA,GAAMI,CAAAA,qBAAqB,CAAGD,oBAAoB,CAAG,CAArD,CACA,GAAIC,qBAAJ,CAA2B,CACvBX,mBAAmB,CAACU,oBAAD,CAAnB,CACAR,kBAAkB,CAAC,IAAD,CAAlB,CACH,CACD,GAAMU,CAAAA,IAAI,CAAG,QAAPA,CAAAA,IAAO,EAAM,CACfJ,iBAAiB,CAAC,SAAAK,WAAW,QAAIA,CAAAA,WAAW,CAAG,CAAlB,EAAZ,CAAjB,CACH,CAFD,CAGA,GAAMC,CAAAA,aAAa,CAAGC,WAAW,CAAC,iBAAMH,CAAAA,IAAI,EAAV,EAAD,CAAe,IAAf,CAAjC,CACA,MAAO,kBAAMI,CAAAA,aAAa,CAACF,aAAD,CAAnB,EAAP,CACH,CAbQ,CAaN,CAACjB,iBAAD,CAAoBC,mBAApB,CAAyCE,mBAAzC,CAA8DO,cAA9D,CAbM,CAAT,CAeA,MAAO,CAAEN,eAAe,CAAfA,eAAF,CAAmBF,gBAAgB,CAAhBA,gBAAnB,CAAP,CACH,CArBD,CAuBA,cAAeH,CAAAA,qBAAf","sourcesContent":["import { useEffect, useState } from 'react';\n\nconst useWithdrawalFeeTimer = (lastDepositedTime: number, withdrawalFeePeriod = 259200) => {\n    const [secondsRemaining, setSecondsRemaining] = useState(null);\n    const [hasUnstakingFee, setHasUnstakingFee] = useState(false);\n    const [currentSeconds, setCurrentSeconds] = useState(Math.floor(Date.now() / 1000));\n\n    useEffect(() => {\n        const feeEndTime = lastDepositedTime + withdrawalFeePeriod;\n        const secondsRemainingCalc = feeEndTime - currentSeconds;\n        const doesUnstakingFeeApply = secondsRemainingCalc > 0;\n        if (doesUnstakingFeeApply) {\n            setSecondsRemaining(secondsRemainingCalc);\n            setHasUnstakingFee(true);\n        }\n        const tick = () => {\n            setCurrentSeconds(prevSeconds => prevSeconds + 1);\n        };\n        const timerInterval = setInterval(() => tick(), 1000);\n        return () => clearInterval(timerInterval);\n    }, [lastDepositedTime, withdrawalFeePeriod, setSecondsRemaining, currentSeconds]);\n\n    return { hasUnstakingFee, secondsRemaining };\n};\n\nexport default useWithdrawalFeeTimer;"]},"metadata":{},"sourceType":"module"}