{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport { useEffect, useState } from 'react';\nimport BigNumber from 'bignumber.js';\nimport { useWallet } from '@binance-chain/bsc-use-wallet';\nimport multicall from 'utils/multicall';\nimport labo from 'config/constants/labo';\nimport { getMasterChefAddress } from 'utils/addressHelpers';\nimport masterChefABI from 'config/abi/masterchef.json';\nimport { farmsConfig } from 'config/constants';\nimport useRefresh from './useRefresh';\n\nconst useFarmsWithBalance = () => {\n  _s();\n\n  const [farmsWithBalances, setFarmsWithBalances] = useState([]);\n  const {\n    account\n  } = useWallet();\n  const {\n    fastRefresh\n  } = useRefresh();\n  useEffect(() => {\n    const fetchBalances = async () => {\n      const calls = farmsConfig.map(farm => ({\n        address: getMasterChefAddress(),\n        name: labo.strings.pendingX,\n        params: [farm.pid, account]\n      }));\n      const rawResults = await multicall(masterChefABI, calls);\n      const results = farmsConfig.map((farm, index) => ({ ...farm,\n        balance: new BigNumber(rawResults[index])\n      }));\n      setFarmsWithBalances(results);\n    };\n\n    if (account) {\n      fetchBalances();\n    }\n  }, [account, fastRefresh]);\n  return farmsWithBalances;\n};\n\n_s(useFarmsWithBalance, \"CHNPAMzPWe7dKEIn65bMTj3w5JE=\", false, function () {\n  return [useWallet, useRefresh];\n});\n\nexport default useFarmsWithBalance;","map":{"version":3,"sources":["/Users/ignacio/Documents/GitHub/reverse-frontend/src/hooks/useFarmsWithBalance.ts"],"names":["useEffect","useState","BigNumber","useWallet","multicall","labo","getMasterChefAddress","masterChefABI","farmsConfig","useRefresh","useFarmsWithBalance","farmsWithBalances","setFarmsWithBalances","account","fastRefresh","fetchBalances","calls","map","farm","address","name","strings","pendingX","params","pid","rawResults","results","index","balance"],"mappings":";;AAAA,SAASA,SAAT,EAAoBC,QAApB,QAAoC,OAApC;AACA,OAAOC,SAAP,MAAsB,cAAtB;AACA,SAASC,SAAT,QAA0B,+BAA1B;AACA,OAAOC,SAAP,MAAsB,iBAAtB;AACA,OAAOC,IAAP,MAAiB,uBAAjB;AACA,SAASC,oBAAT,QAAqC,sBAArC;AACA,OAAOC,aAAP,MAA0B,4BAA1B;AACA,SAASC,WAAT,QAA4B,kBAA5B;AAEA,OAAOC,UAAP,MAAuB,cAAvB;;AAMA,MAAMC,mBAAmB,GAAG,MAAM;AAAA;;AAChC,QAAM,CAACC,iBAAD,EAAoBC,oBAApB,IAA4CX,QAAQ,CAAoB,EAApB,CAA1D;AACA,QAAM;AAAEY,IAAAA;AAAF,MAAcV,SAAS,EAA7B;AACA,QAAM;AAAEW,IAAAA;AAAF,MAAkBL,UAAU,EAAlC;AAEAT,EAAAA,SAAS,CAAC,MAAM;AACd,UAAMe,aAAa,GAAG,YAAY;AAChC,YAAMC,KAAK,GAAGR,WAAW,CAACS,GAAZ,CAAiBC,IAAD,KAAW;AACvCC,QAAAA,OAAO,EAAEb,oBAAoB,EADU;AAEvCc,QAAAA,IAAI,EAAEf,IAAI,CAACgB,OAAL,CAAaC,QAFoB;AAGvCC,QAAAA,MAAM,EAAE,CAACL,IAAI,CAACM,GAAN,EAAWX,OAAX;AAH+B,OAAX,CAAhB,CAAd;AAMA,YAAMY,UAAU,GAAG,MAAMrB,SAAS,CAACG,aAAD,EAAgBS,KAAhB,CAAlC;AACA,YAAMU,OAAO,GAAGlB,WAAW,CAACS,GAAZ,CAAgB,CAACC,IAAD,EAAOS,KAAP,MAAkB,EAAE,GAAGT,IAAL;AAAWU,QAAAA,OAAO,EAAE,IAAI1B,SAAJ,CAAcuB,UAAU,CAACE,KAAD,CAAxB;AAApB,OAAlB,CAAhB,CAAhB;AAEAf,MAAAA,oBAAoB,CAACc,OAAD,CAApB;AACD,KAXD;;AAaA,QAAIb,OAAJ,EAAa;AACXE,MAAAA,aAAa;AACd;AACF,GAjBQ,EAiBN,CAACF,OAAD,EAAUC,WAAV,CAjBM,CAAT;AAmBA,SAAOH,iBAAP;AACD,CAzBD;;GAAMD,mB;UAEgBP,S,EACIM,U;;;AAwB1B,eAAeC,mBAAf","sourcesContent":["import { useEffect, useState } from 'react'\nimport BigNumber from 'bignumber.js'\nimport { useWallet } from '@binance-chain/bsc-use-wallet'\nimport multicall from 'utils/multicall'\nimport labo from 'config/constants/labo'\nimport { getMasterChefAddress } from 'utils/addressHelpers'\nimport masterChefABI from 'config/abi/masterchef.json'\nimport { farmsConfig } from 'config/constants'\nimport { FarmConfig } from 'config/constants/types'\nimport useRefresh from './useRefresh'\n\nexport interface FarmWithBalance extends FarmConfig {\n  balance: BigNumber\n}\n\nconst useFarmsWithBalance = () => {\n  const [farmsWithBalances, setFarmsWithBalances] = useState<FarmWithBalance[]>([])\n  const { account } = useWallet()\n  const { fastRefresh } = useRefresh()\n\n  useEffect(() => {\n    const fetchBalances = async () => {\n      const calls = farmsConfig.map((farm) => ({\n        address: getMasterChefAddress(),\n        name: labo.strings.pendingX,\n        params: [farm.pid, account],\n      }))\n\n      const rawResults = await multicall(masterChefABI, calls)\n      const results = farmsConfig.map((farm, index) => ({ ...farm, balance: new BigNumber(rawResults[index]) }))\n\n      setFarmsWithBalances(results)\n    }\n\n    if (account) {\n      fetchBalances()\n    }\n  }, [account, fastRefresh])\n\n  return farmsWithBalances\n}\n\nexport default useFarmsWithBalance\n"]},"metadata":{},"sourceType":"module"}